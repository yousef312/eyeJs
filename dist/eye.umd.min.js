!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).eye={})}(this,(function(e){"use strict";const t=new Set(["opacity","zIndex","fontWeight","lineHeight","flex","flexGrow","flexShrink","order"]);const n=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","keydown","keypress","keyup","focus","blur","focusin","focusout","submit","change","input","reset","select","touchstart","touchend","touchmove","touchcancel","pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","dragstart","dragend","dragenter","dragover","dragleave","drop","resize","scroll","load","beforeunload","unload","play","pause","ended","volumechange","timeupdate","copy","cut","paste","animationstart","animationend","animationiteration","transitionstart","transitionend","DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","error","hashchange","popstate"],r=["<base>","<head>","<link>","<meta>","<style>","<title>","<body>","<address>","<article>","<aside>","<footer>","<header>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<main>","<nav>","<section>","<blockquote>","<dd>","<div>","<dl>","<dt>","<figcaption>","<figure>","<hr>","<li>","<ol>","<p>","<pre>","<ul>","<a>","<abbr>","<b>","<bdi>","<bdo>","<br>","<cite>","<code>","<data>","<dfn>","<em>","<i>","<kbd>","<mark>","<q>","<rp>","<rt>","<ruby>","<s>","<samp>","<small>","<span>","<strong>","<sub>","<sup>","<time>","<u>","<var>","<wbr>","<area>","<audio>","<img>","<map>","<track>","<video>","<embed>","<iframe>","<object>","<picture>","<portal>","<source>","<canvas>","<noscript>","<script>","<del>","<ins>","<caption>","<col>","<colgroup>","<table>","<tbody>","<td>","<tfoot>","<th>","<thead>","<tr>","<button>","<datalist>","<fieldset>","<form>","<input>","<label>","<legend>","<meter>","<optgroup>","<option>","<output>","<progress>","<select>","<textarea>","<details>","<dialog>","<summary>","<slot>","<template>"],s=["click","focus","blur","select","submit","reset"];function i(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];r===r.toUpperCase()&&r!==r.toLowerCase()?t+="-"+r:t+=r}return t.toLowerCase()}const o=new WeakMap;function a(e,t){let n=[];for(const r in t){const s=t[r],[i,o]=r.split(":"),[l,...c]=i.split(".");let[u=null,f=null]=(o||"").split("-").map((e=>e.trim())),d=h(l.trim(),{class:c,parent:e,data:o?{value:u}:void 0});o&&u&&n.push({name:u,set(e,t){let n=e.find(`[data-value="${u}"]`);n&&(n[0].textContent=t??f)}}),!s||"object"!=typeof s||s instanceof Array||(n=n.concat(a(d,s)))}return n}let l=["click","dblclick","submit","input","change","keydown","keyup","keypress","focusin","focusout","mousedown","mouseup","mousemove","contextmenu","auxclick","wheel","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","gotpointercapture","lostpointercapture","pointercancel"],c=(e,t,n)=>t;class u{#e=null;#t=new Map;#n={value:c,text:c};constructor(e,t,o){let a=this;if(e instanceof HTMLElement)this.#e=[e];else if(r.includes(e))this.#e=[document.createElement(e.substring(1,e.length-1))];else if(Array.isArray(e))this.#e=[],e.forEach((e=>{e instanceof u?a.#e=a.#e.concat(...e.raw):e instanceof HTMLElement&&a.#e.push(e)}));else{let t="!"===e.slice(-1);this.#e=[...document.querySelectorAll(t?e.slice(0,-1):e)]}function c(e){let t=e.type,n=a.#t,r=e.target,s=this;if(n.has(t)){let i=n.get(t);i?.forEach((({callback:t,target:n})=>{r.closest(n)&&t(e,s)}))}}return this.each(((e,n)=>{let r=null;if(t)for(const n in t){const s=t[n];if("class"==n)e.classList.add.apply(e.classList,(s instanceof Array?s:s.split(" ")).filter((e=>""!=e)));else if("text"==n)e.textContent=s;else if("html"==n)e.innerHTML=s;else if("data"==n)for(const t in s)e.dataset[t]=s[t];else"parent"==n?r=s:n in e?e[n]=s:"_"!=n[0]&&e.setAttribute(n,s)}if(o)for(const t in o)-1!=t.indexOf("-")?e.style[t]=o[t]:e.style[i(t)]=o[t];(r instanceof u||r instanceof HTMLElement)&&r.append(e),l.forEach((t=>{e.addEventListener(t,c)}))})),n.forEach((e=>{a[e]=function(t){return t?"function"==typeof t&&a.on(e,t):s.includes(e)?a.each((t=>t[e]())):a.trigger(e),a}})),this}get length(){return this.#e.length}get raw(){return this.#e}each(e){for(let t=0;t<this.#e.length;t++){if(!1===e(this.#e[t],t,this))break}return this}eachChild(e){let t=this;return this.each((function(n,r,s){let i=!0;for(let r=0;r<n.children.length&&(i=e(n.children[r],r,n,t),!1!==i);r++);}))}html(e){let t;return this.each(((n,r)=>{if(void 0===e)return t=n.innerHTML;n.innerHTML=e})),null!=t?t:this}text(e){let t;return this.each(((n,r)=>{if(void 0===e)return t=this.#n.text("get",n.textContent,n);n.textContent=this.#n.text("set",e,n)})),null!=t?t:this}data(e,t){if(o.has(this)||o.set(this,{}),e){if(null==t)return o.get(this)[e];o.get(this)[e]=t}return this}attr(e,t){let n="";return this.each(((r,s)=>{if(0===e.indexOf("data-")){let[s,i]=e.split("-").map((e=>e.trim()));if(null==t)return n=r.dataset[i];r.dataset[i]=t}else if(e in r){if(null==t)return n=r[e];r[e]=t}else if("_"!=e[0]){if(null==t)return n=r.getAttribute(e);r.setAttribute(e,t)}})),n||this}rAttr(e){return e&&this.each(((t,n)=>{t.removeAttribute(e)})),this}class(e){let t;return this.each(((n,r)=>{if("number"==typeof e)return t=n.classList.item(e);e.split(" ").forEach((e=>{if("-"==e[0])n.classList.remove(e.substring(1,e.length));else if("%"==e[0])n.classList.toggle(e.substring(1,e.length));else if("?"==e[0])t=n.classList.contains(e.substring(1,e.length));else if(-1!=e.indexOf("/")){let[t,r]=e.split("/");n.classList.replace(t,r)}else n.classList.add(e)}))})),null!=t?t:this}show(e){return this.each(((t,n)=>{t.style.display=e??"inline-block"})),this}hide(e){return this.each(((t,n)=>{e?t.style.opacity=0:t.style.display="none"})),this}append(e,t){return(Array.isArray(e)?e:[e]).forEach((e=>{let n=[];e instanceof u?n=[...e.raw]:e instanceof HTMLElement&&(n=[e]),n.forEach((e=>{switch(t){case"next":case"after":this.#e[0].after(e);break;case"previous":case"before":this.#e[0].before(e);break;case"afterbegin":case"first":this.#e[0].prepend(e);break;default:this.#e[0].append(e)}}))})),this}after(e){return e instanceof HTMLElement||e instanceof u||e instanceof Node?(this.#e[0].after(e instanceof u?e.raw[0]:e),this):this.#e[0].nextElementSibling?h(this.#e[0].nextElementSibling,e):null}before(e){return e instanceof HTMLElement||e instanceof u||e instanceof Node?(this.#e[0].before(e instanceof u?e.raw[0]:e),this):this.#e[0].previousElementSibling?h(this.#e[0].previousElementSibling,e):null}replaceWith(...e){let t=[];return(Array.isArray(e)?e:[e]).forEach((e=>{e instanceof u?t=t.concat(...e.raw):e instanceof HTMLElement&&t.push(e)})),this.#e[0].replaceWith(...t),this}parent(e,t){if(e){if(!(e instanceof HTMLElement||e instanceof u))throw new Error("[EyeJS] Unable to append current element to parent because it's not HTMLElement");return this.each((n=>{e.append(!0===t?n.cloneNode(!0):n)})),this}return h(this.#e[0].parentElement)}is(e,t){if("connected"===(e=e instanceof u?e.#e[0]:e))return this.#e[0].isConnected;switch(t){case"same":return this.#e[0].isSameNode(e);case"equal":return this.#e[0].isEqualNode(e);default:return console.error(`[EyeJS] Unknown check "${t}", possible values are ["same","equal","connected"]`),!1}}css(e,n){if(e){let r;return t.has(e)||"number"!=typeof n||0==n||(n=`${n}px`),e=i(e),this.each(((t,s)=>{if(void 0===n)return r=t.style[e];t.style[e]=n})),null!=r?r:this}return console.error('[EyeJS] missing argument "attr" in function .css')}remove(e,t){return this.each(((n,r)=>{"string"==typeof e?n.querySelectorAll(e).forEach((e=>{"function"==typeof t&&t(h(e)),e.remove()})):n.remove()})),this}on(e,t,n){e=e.split(" ");let r="string"==typeof t?t:null,s="function"==typeof t?t:n,i=this;if("function"!=typeof s)return console.error("[EyeJS] .on method is missing the actuall callback `cb` or not of type function");let o=null;return e.forEach((e=>{if(r){if(!l.includes(e))return o=e;i.#t.has(e)||i.#t.set(e,new Set),i.#t.get(e).add({callback:s,target:r})}else i.each((t=>{t.addEventListener(e,s)}))})),null!==o?console.error(`[EyeJS] trying to use delegation for an inappropriate event "${o}"`):this}off(e,t){let n=this.#t;if("function"!=typeof t)return console.error("[EyeJS] .off method is missing the actuall callback `cb` or not of type function");e=e.split(" "),this.each(((n,r)=>{e.forEach((e=>n.removeEventListener(e,t)))})),e.forEach((e=>{if(n.has(e)){let r=n.get(e);for(const e of r)t===e.callback&&r.delete(e)}}))}trigger(e){return this.each(((t,n)=>{t.dispatchEvent(e instanceof Event?e:function(e,t={}){switch(e){case"click":case"dblclick":case"mousedown":case"mouseup":case"mousemove":case"mouseenter":case"mouseleave":case"mouseover":case"mouseout":return new MouseEvent(e,t);case"pointerdown":case"pointerup":case"pointermove":case"pointerenter":case"pointerleave":case"pointerover":case"pointerout":return new PointerEvent(e,t);case"keydown":case"keyup":case"keypress":return new KeyboardEvent(e,t);case"focus":case"blur":case"focusin":case"focusout":return new FocusEvent(e,t);case"input":case"change":case"submit":case"reset":return new Event(e,t);case"wheel":return new WheelEvent(e,t);case"copy":case"cut":case"paste":return new ClipboardEvent(e,t);case"scroll":case"resize":return new UIEvent(e,t);default:return new CustomEvent(e,t)}}(e))})),this}find(e){let t=[];return this.each(((n,r)=>{n.querySelectorAll(e).forEach((e=>t.push(e)))})),0==t.length?null:t}clone(e){let t=[];return this.each((e=>{t.push(e.cloneNode(!0))})),(e instanceof HTMLElement||e instanceof u)&&t.forEach((t=>e.append(t))),t}compute(e){return"bounds"===(e=e||"bounds")?this.#e[0].getBoundingClientRect():"style"==e?getComputedStyle(this.#e[0]):void console.error(`[EyeJS] unknown type "${e}" in function .compute, possible values are "bounds" "style"`)}client(e){return["width","height","left","top"].includes(e)?this.#e[0][`client${e[0].toUpperCase()}${e.substring(1,e.length)}`]:(console.error(`[EyeJS] Unknown client* attribute "${e}" in .client(attr)`),this)}pointer(e,t,n){return this.each(((r,s)=>{"capture"===e?!0===t?r.setPointerCapture(n):r.releasePointerCapture(n):"lock"===e&&(!0===t?r.requestPointerLock():document.exitPointerLock())})),this}get childlen(){return this.#e[0].children.length}child(e){return void 0===e?this.#e[0].children.length:this.#e[0].children[e]?h(this.#e[0].children[e]):null}val(e){return null==e?this.#n.value("get",this.#e[0].value,this.#e[0]):(this.each((t=>t.value=this.#n.value("set",e,t))),this)}serialize(e){e=e||{};let{inputs:t=["input","textarea","select"]}=e,n={json:{},url:"",fd:new FormData};return this.#e[0].querySelectorAll(t.join(",")).forEach(((t,r)=>{let s=t.name||t.dataset.name,i=t.value||t.textContent;"function"==typeof e[s]&&(i=e[s](t)),"file"==t.type?t.files.forEach((e=>{n.fd.append(s,e)})):(n.json[s]=i,n.fd.append(s,i))})),n.url=new URLSearchParams(n.json).toString(),n}redefine(e,t){return["text","value"].includes(e)&&"function"==typeof t&&(this.#n[e]=t),this}animate(e,t){let n=[];return t.duration=t.duration||1e3,this.each(((r,s)=>{n.push(r.animate(e,t))})),1==n.length?n[0]:n}position(){let e=-1;for(let t=0;t<this.#e[0].parentNode.children.length;t++){const n=this.#e[0].parentNode.children[t];if(this.#e[0].isSameNode(n)){e=t;break}}return e}getctx(e,t){return"function"==typeof this.#e[0].getContext?this.#e[0].getContext(e,t):this}}function h(e,t,n){if("string"==typeof e&&0===e.indexOf("model:")||"model"===e){if(!t)return console.error("[EyeJS] Model creation requires parameter 'attr' as prototype, none delivered!");let n=["eye-model"];(e=e.split(":"))[1]&&(n=n.concat(e[1].split(" ").filter((e=>""!=e))));let r=h("<div>",{class:n.join(" ")}),s=a(r,t);return e=>{let t=h(r.clone(e?.parent));return t.refresh=function(e={}){let n=!1!==e.default;return s.forEach((r=>{(!0===n||!n&&e.hasOwnProperty(r.name))&&r.set(t,e[r.name])})),this},t.refresh(e)}}{let r=new u(e,t,n);return 0===r.length?null:r}}window.e=h,window.EyeElement=u,e.EyeElement=u,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eye.umd.min.js.map
