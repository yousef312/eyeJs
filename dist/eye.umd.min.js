!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).eye={})}(this,(function(e){"use strict";const t=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","keydown","keypress","keyup","focus","blur","focusin","focusout","submit","change","input","reset","select","touchstart","touchend","touchmove","touchcancel","pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","dragstart","dragend","dragenter","dragover","dragleave","drop","resize","scroll","load","beforeunload","unload","play","pause","ended","volumechange","timeupdate","copy","cut","paste","animationstart","animationend","animationiteration","transitionstart","transitionend","DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","error","hashchange","popstate"],n=["<base>","<head>","<link>","<meta>","<style>","<title>","<body>","<address>","<article>","<aside>","<footer>","<header>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<main>","<nav>","<section>","<blockquote>","<dd>","<div>","<dl>","<dt>","<figcaption>","<figure>","<hr>","<li>","<ol>","<p>","<pre>","<ul>","<a>","<abbr>","<b>","<bdi>","<bdo>","<br>","<cite>","<code>","<data>","<dfn>","<em>","<i>","<kbd>","<mark>","<q>","<rp>","<rt>","<ruby>","<s>","<samp>","<small>","<span>","<strong>","<sub>","<sup>","<time>","<u>","<var>","<wbr>","<area>","<audio>","<img>","<map>","<track>","<video>","<embed>","<iframe>","<object>","<picture>","<portal>","<source>","<canvas>","<noscript>","<script>","<del>","<ins>","<caption>","<col>","<colgroup>","<table>","<tbody>","<td>","<tfoot>","<th>","<thead>","<tr>","<button>","<datalist>","<fieldset>","<form>","<input>","<label>","<legend>","<meter>","<optgroup>","<option>","<output>","<progress>","<select>","<textarea>","<details>","<dialog>","<summary>","<slot>","<template>"];function s(e){let t="";for(let n=0;n<e.length;n++){const s=e[n];s===s.toUpperCase()&&s!==s.toLowerCase()?t+="-"+s:t+=s}return t.toLowerCase()}const r=new WeakMap;function i(e,t){let n=[];for(const s in t){const r=t[s],[a,o]=s.split(":"),[l,...u]=a.split(".");let[h=null,f=null]=(o||"").split("-").map((e=>e.trim())),d=c(l.trim(),{class:u,parent:e,data:o?{value:h}:void 0});o&&h&&n.push({name:h,set(e,t){e.find(`[data-value="${h}"]`).textContent=t??f}}),!r||"object"!=typeof r||r instanceof Array||(n=n.concat(i(d,r)))}return n}let a=["click","dblclick","submit","input","change","keydown","keyup","keypress","focusin","focusout","mousedown","mouseup","mousemove","contextmenu","auxclick","wheel","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","gotpointercapture","lostpointercapture","pointercancel"],o=(e,t,n)=>t;class l{#e=null;#t=new Map;#n={value:o,text:o};constructor(e,r,i){let o=this;if(e instanceof HTMLElement)this.#e=e;else if(n.includes(e))this.#e=document.createElement(e.substring(1,e.length-1));else{let t="!"===e.slice(-1);if(this.#e=document.querySelectorAll(t?e.slice(0,-1):e),0==this.#e.length)return null;(1==this.length||t)&&(this.#e=this.#e.item(0))}function c(e){let t=e.type,n=o.#t,s=e.target,r=this;if(n.has(t)){let i=n.get(t);i?.forEach((({callback:t,target:n})=>{s.closest(n)&&t(e,r)}))}}return this.each(((e,t)=>{let n=null;if(r)for(const t in r){const s=r[t];if("class"==t)e.classList.add.apply(e.classList,(s instanceof Array?s:s.split(" ")).filter((e=>""!=e)));else if("text"==t)e.textContent=s;else if("html"==t)e.innerHTML=s;else if("data"==t)for(const t in s)e.dataset[t]=s[t];else"parent"==t?n=s:t in e?e[t]=s:"_"!=t[0]&&e.setAttribute(t,e)}if(i)for(const t in i)-1!=t.indexOf("-")?e.style[t]=i[t]:e.style[s(t)]=i[t];(n instanceof l||n instanceof HTMLElement)&&n.append(e),a.forEach((t=>{e.addEventListener(t,c)}))})),t.forEach((e=>{o[e]=function(t){return t?"function"==typeof t&&o.on(e,t):o.trigger(e),o}})),this}get length(){return this.#e instanceof NodeList?this.#e.length:1}get raw(){return this.#e}each(e){return(this.#e instanceof NodeList?[...this.#e.entries()]:[[0,this.#e]]).forEach((([t,n])=>{e(n,t,this)})),this}html(e){let t;return this.each(((n,s)=>{if(void 0===e)return t=n.innerHTML;n.innerHTML=e})),null!=t?t:this}text(e){let t;return this.each(((n,s)=>{if(void 0===e)return t=this.#n.text("get",n.textContent,n);n.textContent=this.#n.text("set",e,n)})),null!=t?t:this}data(e,t){if(r.has(this)||r.set(this,{}),e){if(null==t)return r.get(this)[e];r.get(this)[e]=t}return this}attr(e,t){let n="";return this.each(((s,r)=>{if(0===e.indexOf("data-")){let[r,i]=e.split("-").map((e=>e.trim()));if(null==t)return n=s.dataset[i];s.dataset[i]=t}else if(e in s){if(null==t)return n=s[e];s[e]=t}else if("_"!=e[0]){if(null==t)return n=s.getAttribute(e);s.setAttribute(e,t)}})),n||this}rAttr(e){return e&&this.each(((t,n)=>{t.removeAttribute(e)})),this}class(e){let t;return this.each(((n,s)=>{if("number"==typeof e)return t=n.classList.item(e);e.split(" ").forEach((e=>{if("-"==e[0])n.classList.remove(e.substring(1,e.length));else if("%"==e[0])n.classList.toggle(e.substring(1,e.length));else if("?"==e[0])t=n.classList.contains(e.substring(1,e.length));else if(-1!=e.indexOf("/")){let[t,s]=e.split("/");n.classList.replace(t,s)}else n.classList.add(e)}))})),null!=t?t:this}show(e){return this.each(((t,n)=>{t.style.display=e??"inline-block"})),this}hide(e){return this.each(((t,n)=>{e?t.style.opacity=0:t.style.display="none"})),this}append(e,t){let n=[];if((Array.isArray(e)?e:[e]).forEach((e=>{e instanceof l?n.push(e.#e):e instanceof HTMLElement&&n.push(e)})),this.#e instanceof NodeList)return console.warn("[EyeJS] beware while using .append with multi selected elements"),this.#e.forEach(((e,t)=>{n[t]&&e.append(n[t])})),this;if(t)switch(t){case"next":case"after":this.#e.after(...n);break;case"previous":case"before":this.#e.before(...n);break;case"afterbegin":case"first":this.#e.prepend(...n);break;case"beforeend":case"last":this.#e.append(...n)}else this.#e.append(...n);return this}after(e){return(this.#e instanceof NodeList?this.#e.item(0):this.#e).after(e instanceof l?e.raw:e),this}before(e){return(this.#e instanceof NodeList?this.#e.item(0):this.#e).before(e instanceof l?e.raw:e),this}replaceWith(...e){let t=[];return(Array.isArray(e)?e:[e]).forEach((e=>{e instanceof l?t.push(e.#e):e instanceof HTMLElement&&t.push(e)})),this.#e instanceof NodeList?[...this.#e.entries()].forEach((([e,n])=>{t[e]&&n.replaceWith(t[e])})):this.#e.replaceWith(...t),this}parent(e){if(e){if(!(e instanceof HTMLElement||e instanceof l))throw new Error("[EyeJS] Unable to append current element to parent because it's not HTMLElement");return this.each(((t,n)=>{e.append(t)})),this}return c(this.#e instanceof NodeList?this.#e.item(0).parentElement:this.#e.parentElement)}is(e,t){if(e=e instanceof l?e.#e:e,this.#e instanceof NodeList)return console.warn("[EyeJS] .is is not functional with multi selected elements"),this;if("connected"===e)return this.#e.isConnected;switch(t){case"same":return this.#e.isSameNode(e);case"equal":return this.#e.isEqualNode(e);default:return console.error(`[EyeJS] Unknown check "${t}", possible values are ["same","equal","connected"]`),!1}}css(e,t){if(e){let n;return e=s(e),this.each(((s,r)=>{if(void 0===t)return n=s.style[e];s.style[e]=t})),null!=n?n:this}return console.error('[EyeJS] mission argument "attr" in function .css')}remove(){return this.each(((e,t)=>{e.remove()})),this}on(e,t,n){e=e.split(" ");let s="string"==typeof t?t:null,r="function"==typeof t?t:n,i=this;if("function"!=typeof r)return console.error("[EyeJS] .on method is missing the actuall callback `cb` or not of type function");let o=this.#e instanceof NodeList?[...this.#e.entries()]:[[0,this.#e]],l=null;return e.forEach((e=>{if(s){if(!a.includes(e))return l=e;i.#t.has(e)||i.#t.set(e,new Set),i.#t.get(e).add({callback:r,target:s})}else o.forEach((([t,n])=>{n.addEventListener(e,r)}))})),null!==l?console.error(`[EyeJS] trying to use delegation for an inappropriate event "${l}"`):this}off(e,t){let n=this.#t;if("function"!=typeof t)return console.error("[EyeJS] .off method is missing the actuall callback `cb` or not of type function");e=e.split(" "),this.each(((n,s)=>{e.forEach((e=>n.removeEventListener(e,t)))})),e.forEach((e=>{if(n.has(e)){let s=n.get(e);for(const e of s)t===e.callback&&s.delete(e)}}))}trigger(e){return this.each(((t,n)=>{t.dispatchEvent(function(e,t={}){switch(e){case"click":case"dblclick":case"mousedown":case"mouseup":case"mousemove":case"mouseenter":case"mouseleave":case"mouseover":case"mouseout":return new MouseEvent(e,t);case"pointerdown":case"pointerup":case"pointermove":case"pointerenter":case"pointerleave":case"pointerover":case"pointerout":return new PointerEvent(e,t);case"keydown":case"keyup":case"keypress":return new KeyboardEvent(e,t);case"focus":case"blur":case"focusin":case"focusout":return new FocusEvent(e,t);case"input":case"change":case"submit":case"reset":return new Event(e,t);case"wheel":return new WheelEvent(e,t);case"copy":case"cut":case"paste":return new ClipboardEvent(e,t);case"scroll":case"resize":return new UIEvent(e,t);default:return new CustomEvent(e,t)}}(e))})),this}find(e){let t=[];return this.each(((n,s)=>{n.querySelectorAll(e).forEach((e=>t.push(e)))})),1==t.length?t[0]:t}clone(e){if(this.#e instanceof NodeList){let t=[];return this.#e.forEach((e=>{t.push(e.cloneNode(!0))})),(e instanceof HTMLElement||e instanceof l)&&t.forEach((t=>e.append(t))),t}{let t=this.#e.cloneNode(!0);return(e instanceof HTMLElement||e instanceof l)&&e.append(t),t}}compute(e){return"bounds"===(e=e||"bounds")?(this.#e instanceof NodeList?this.#e.item(0):this.#e).getBoundingClientRect():"style"==e?getComputedStyle(this.#e instanceof NodeList?this.#e.item(0):this.#e):void console.error(`[EyeJS] unkown type "${e}" in function .compute, possible values are "bounds" "style"`)}client(e){return["width","height","left","top"].includes(e)?(this.#e instanceof NodeList?this.#e.item(0):this.#e)[`client${e[0].toUpperCase()}${e.substring(1,e.length)}`]:(console.error(`[EyeJS] Unknown client* attribute "${e}" in .client(attr)`),this)}pointer(e,t,n){return this.each(((s,r)=>{"capture"===e?!0===t?s.setPointerCapture(n):s.releasePointerCapture(n):"lock"===e&&(!0===t?s.requestPointerLock():document.exitPointerLock())})),this}get childlen(){return(this.#e instanceof NodeList?this.#e.item(0):this.#e)?.children.length}child(e){let t=this.#e instanceof NodeList?this.#e.item(0):this.#e;return void 0===e?t.children.length:t.children[e]?c(t.children[e]):null}val(e){if(null==e){let e=this.#e instanceof NodeList?this.#e.item(0):this.#e;return this.#n.value("get",e.value,e)}return(this.#e instanceof NodeList?[...this.#e.entries()]:[[0,this.#e]]).forEach((([t,n])=>n.value=this.#n.value("set",e,n))),this}serialize(e){e=e||{};let{inputs:t=["input","textarea","select"]}=e;if(this.#e instanceof HTMLElement){let n={json:{},url:"",fd:new FormData};return this.#e.querySelectorAll(t.join(",")).forEach(((t,s)=>{let r=t.name||t.dataset.name,i=t.value||t.textContent;"function"==typeof e[r]&&(i=e[r](t)),"file"==t.type?t.files.forEach((e=>{n.fd.append(r,e)})):(n.json[r]=i,n.fd.append(r,i))})),n.url=new URLSearchParams(n.json).toString(),n}console.warn("[EyeJS] this is a multi selection, it's not serializable!")}redefine(e,t){return["text","value"].includes(e)&&"function"==typeof t&&(this.#n[e]=t),this}animate(e,t){let n=[];return t.duration=t.duration||1e3,this.each(((s,r)=>{n.push(s.animate(e,t))})),1==n.length?n[0]:n}position(){let e=[];return this.each((t=>{for(let n=0;n<t.parentNode.children.length;n++){const s=t.parentNode.children[n];t.isSameNode(s)&&e.push(n)}})),0==e.length?e[0]:e}}function c(e,t,n){if("string"==typeof e&&0===e.indexOf("model:")||"model"===e){if(!t)return console.error("[EyeJS] Model creation requires parameter 'attr' as prototype, none delivered!");let n=["eye-model"];(e=e.split(":"))[1]&&(n=n.concat(e[1].split(" ").filter((e=>""!=e))));let s=c("<div>",{class:n.join(" ")}),r=i(s,t);return e=>{let t=c(s.clone(e?.parent));return t.refresh=function(e={}){let n=!1!==e.default;return r.forEach((s=>{(!0===n||!n&&e.hasOwnProperty(s.name))&&s.set(t,e[s.name])})),this},t.refresh(e)}}return new l(e,t,n)}window.e=c,window.EyeElement=l,e.EyeElement=l,e.default=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eye.umd.min.js.map
