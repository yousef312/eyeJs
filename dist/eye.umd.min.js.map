{"version":3,"file":"eye.umd.min.js","sources":["../src/eye.js"],"sourcesContent":["/**\r\n * @typedef {Object} AttrMap\r\n * @property {HTMLDivElement} parent - append newly created element to a parent\r\n * @property {Array<String>|String} class - class or array of classes to set\r\n * @property {String} id - set element ID\r\n * @property {Object} data - dataset values to set\r\n * @property {String} text - set element text\r\n * @property {String} html - set element html\r\n */\r\n\r\n/**\r\n * Returns the associated class event of that event\r\n * example: for click event it returns new MouseEvent(\"click\")\r\n * @param {string} ev \r\n */\r\nfunction getEvent(type, options = {}) {\r\n  switch (type) {\r\n    // Mouse Events\r\n    case 'click':\r\n    case 'dblclick':\r\n    case 'mousedown':\r\n    case 'mouseup':\r\n    case 'mousemove':\r\n    case 'mouseenter':\r\n    case 'mouseleave':\r\n    case 'mouseover':\r\n    case 'mouseout':\r\n      return new MouseEvent(type, options);\r\n\r\n    // Pointer Events\r\n    case 'pointerdown':\r\n    case 'pointerup':\r\n    case 'pointermove':\r\n    case 'pointerenter':\r\n    case 'pointerleave':\r\n    case 'pointerover':\r\n    case 'pointerout':\r\n      return new PointerEvent(type, options);\r\n\r\n    // Keyboard Events\r\n    case 'keydown':\r\n    case 'keyup':\r\n    case 'keypress':\r\n      return new KeyboardEvent(type, options);\r\n\r\n    // Focus Events\r\n    case 'focus':\r\n    case 'blur':\r\n    case 'focusin':\r\n    case 'focusout':\r\n      return new FocusEvent(type, options);\r\n\r\n    // Input & Form Events\r\n    case 'input':\r\n    case 'change':\r\n    case 'submit':\r\n    case 'reset':\r\n      return new Event(type, options);\r\n\r\n    // Wheel\r\n    case 'wheel':\r\n      return new WheelEvent(type, options);\r\n\r\n    // Clipboard\r\n    case 'copy':\r\n    case 'cut':\r\n    case 'paste':\r\n      return new ClipboardEvent(type, options);\r\n\r\n    // UI\r\n    case 'scroll':\r\n    case 'resize':\r\n      return new UIEvent(type, options);\r\n\r\n    // Default: fallback to generic Event\r\n    default:\r\n      return new CustomEvent(type, options);\r\n  }\r\n}\r\n\r\n/**\r\n * @typedef {EyeElement & {\r\n *  refresh: (attrs: AttrMap) => ModelEyeElement\r\n * }} ModelEyeElement eye element definition for model elements\r\n */\r\n\r\nconst events = [\r\n  // Mouse Events\r\n  \"click\",\r\n  \"dblclick\",\r\n  \"mousedown\",\r\n  \"mouseup\",\r\n  \"mousemove\",\r\n  \"mouseenter\",\r\n  \"mouseleave\",\r\n  \"mouseover\",\r\n  \"mouseout\",\r\n  \"contextmenu\",\r\n\r\n  // Keyboard Events\r\n  \"keydown\",\r\n  \"keypress\", // Deprecated\r\n  \"keyup\",\r\n\r\n  // Focus Events\r\n  \"focus\",\r\n  \"blur\",\r\n  \"focusin\",\r\n  \"focusout\",\r\n\r\n  // Form Events\r\n  \"submit\",\r\n  \"change\",\r\n  \"input\",\r\n  \"reset\",\r\n  \"select\",\r\n\r\n  // Touch Events (for mobile)\r\n  \"touchstart\",\r\n  \"touchend\",\r\n  \"touchmove\",\r\n  \"touchcancel\",\r\n\r\n  // Pointer Events\r\n  \"pointerdown\",\r\n  \"pointerup\",\r\n  \"pointermove\",\r\n  \"pointerenter\",\r\n  \"pointerleave\",\r\n  \"pointercancel\",\r\n\r\n  // Drag and Drop Events\r\n  \"dragstart\",\r\n  \"dragend\",\r\n  \"dragenter\",\r\n  \"dragover\",\r\n  \"dragleave\",\r\n  \"drop\",\r\n\r\n  // Window/Document Events\r\n  \"resize\",\r\n  \"scroll\",\r\n  \"load\",\r\n  \"beforeunload\",\r\n  \"unload\",\r\n\r\n  // Media Events\r\n  \"play\",\r\n  \"pause\",\r\n  \"ended\",\r\n  \"volumechange\",\r\n  \"timeupdate\",\r\n\r\n  // Clipboard Events\r\n  \"copy\",\r\n  \"cut\",\r\n  \"paste\",\r\n\r\n  // Animation and Transition Events\r\n  \"animationstart\",\r\n  \"animationend\",\r\n  \"animationiteration\",\r\n  \"transitionstart\",\r\n  \"transitionend\",\r\n\r\n  // Mutation Events\r\n  \"DOMSubtreeModified\",\r\n  \"DOMNodeInserted\",\r\n  \"DOMNodeRemoved\",\r\n\r\n  // Other Events\r\n  \"error\",\r\n  \"hashchange\",\r\n  \"popstate\",\r\n];\r\n\r\nconst htmlElements = [\r\n  // Metadata\r\n  \"base\",\r\n  \"head\",\r\n  \"link\",\r\n  \"meta\",\r\n  \"style\",\r\n  \"title\",\r\n\r\n  // Sections\r\n  \"body\",\r\n  \"address\",\r\n  \"article\",\r\n  \"aside\",\r\n  \"footer\",\r\n  \"header\",\r\n  \"h1\",\r\n  \"h2\",\r\n  \"h3\",\r\n  \"h4\",\r\n  \"h5\",\r\n  \"h6\",\r\n  \"main\",\r\n  \"nav\",\r\n  \"section\",\r\n\r\n  // Text content\r\n  \"blockquote\",\r\n  \"dd\",\r\n  \"div\",\r\n  \"dl\",\r\n  \"dt\",\r\n  \"figcaption\",\r\n  \"figure\",\r\n  \"hr\",\r\n  \"li\",\r\n  \"ol\",\r\n  \"p\",\r\n  \"pre\",\r\n  \"ul\",\r\n\r\n  // Inline text semantics\r\n  \"a\",\r\n  \"abbr\",\r\n  \"b\",\r\n  \"bdi\",\r\n  \"bdo\",\r\n  \"br\",\r\n  \"cite\",\r\n  \"code\",\r\n  \"data\",\r\n  \"dfn\",\r\n  \"em\",\r\n  \"i\",\r\n  \"kbd\",\r\n  \"mark\",\r\n  \"q\",\r\n  \"rp\",\r\n  \"rt\",\r\n  \"ruby\",\r\n  \"s\",\r\n  \"samp\",\r\n  \"small\",\r\n  \"span\",\r\n  \"strong\",\r\n  \"sub\",\r\n  \"sup\",\r\n  \"time\",\r\n  \"u\",\r\n  \"var\",\r\n  \"wbr\",\r\n\r\n  // Image and multimedia\r\n  \"area\",\r\n  \"audio\",\r\n  \"img\",\r\n  \"map\",\r\n  \"track\",\r\n  \"video\",\r\n\r\n  // Embedded content\r\n  \"embed\",\r\n  \"iframe\",\r\n  \"object\",\r\n  \"picture\",\r\n  \"portal\",\r\n  \"source\",\r\n\r\n  // Scripting\r\n  \"canvas\",\r\n  \"noscript\",\r\n  \"script\",\r\n\r\n  // Demarcating edits\r\n  \"del\",\r\n  \"ins\",\r\n\r\n  // Table content\r\n  \"caption\",\r\n  \"col\",\r\n  \"colgroup\",\r\n  \"table\",\r\n  \"tbody\",\r\n  \"td\",\r\n  \"tfoot\",\r\n  \"th\",\r\n  \"thead\",\r\n  \"tr\",\r\n\r\n  // Forms\r\n  \"button\",\r\n  \"datalist\",\r\n  \"fieldset\",\r\n  \"form\",\r\n  \"input\",\r\n  \"label\",\r\n  \"legend\",\r\n  \"meter\",\r\n  \"optgroup\",\r\n  \"option\",\r\n  \"output\",\r\n  \"progress\",\r\n  \"select\",\r\n  \"textarea\",\r\n\r\n  // Interactive elements\r\n  \"details\",\r\n  \"dialog\",\r\n  \"summary\",\r\n\r\n  // Web components / scripting base\r\n  \"slot\",\r\n  \"template\",\r\n];\r\n\r\nfunction flat(word) {\r\n  let n = \"\";\r\n  for (let i = 0; i < word.length; i++) {\r\n    const t = word[i];\r\n    if (t === t.toUpperCase() && t !== t.toLowerCase()) n += \"-\" + t;\r\n    else n += t;\r\n  }\r\n  return n.toLowerCase();\r\n}\r\n\r\n/**\r\n * cmcl stands for Create Model Children Layers, recursively creates model layers one by one\r\n * @param {EyeElement} parent\r\n * @param {Object} layer\r\n * @returns {Array<{name: string,set: (parent: EyeElement, value: String) =>}>}\r\n */\r\nfunction cmcl(parent, layer) {\r\n  let obj = [];\r\n  for (const key in layer) {\r\n    const subcontent = layer[key];\r\n    const [def, _set] = key.split(\":\");\r\n    const [tagName, ...cls] = def.split(\".\");\r\n    let [_set_name = null, _set_default = null] = (_set || \"\")\r\n      .split(\"-\")\r\n      .map((a) => a.trim());\r\n\r\n    let elm = eye(tagName.trim(), {\r\n      class: cls,\r\n      parent,\r\n      data: _set ? { value: _set_name } : undefined,\r\n    });\r\n\r\n    if (_set && _set_name) {\r\n      obj.push({\r\n        name: _set_name,\r\n        set: function (parent, value) {\r\n          let elm = parent.querySelector(`[data-value=\"${_set_name}\"]`);\r\n          elm.textContent = value ?? _set_default;\r\n        },\r\n      });\r\n    }\r\n\r\n    // recursive\r\n    if (\r\n      subcontent &&\r\n      typeof subcontent === \"object\" &&\r\n      !(subcontent instanceof Array)\r\n    )\r\n      obj = obj.concat(cmcl(elm, subcontent));\r\n  }\r\n  return obj;\r\n}\r\n\r\nlet delegationEvents = [\"click\", \"submit\", \"input\", \"change\", \"keydown\", \"keyup\", \"keypress\", \"focusin\", \"focusout\", \"mouseover\", \"mouseout\"];\r\n\r\n/**\r\n * Eye wrapper offers a subset of functions that ease DOM minipulation! Power of JQuery with \r\n * some a modern design and a bunch of new functions.\r\n * @author Yousef Neji\r\n */\r\nfunction EyeElement() {\r\n  /**\r\n   * Raw html element\r\n   * @type {HTMLElement|NodeListOf<HTMLElement>}\r\n   */\r\n  this.raw = null;\r\n\r\n  /**\r\n   * Lenght of the current selected elements\r\n   * @type {number}\r\n   */\r\n  this.length = 0;\r\n\r\n  /**\r\n   * Used to store data locally\r\n   * @type {WeakMap}\r\n   */\r\n  this.datacollection = new WeakMap();\r\n\r\n  /**\r\n   * Used to store delegated events listeners\r\n   * @type {Map<String,Set<{callback: function, target: string}>>}\r\n   */\r\n  this.dlgListeners = new Map();\r\n}\r\nEyeElement.prototype = {\r\n  /**\r\n   * Called internally to initiate the main EyeElement functionalities\r\n   * @method EyeElement#init\r\n   * @param {string|HTMLElement} selector\r\n   * @param {AttrMap} attrs\r\n   * @param {Object} css\r\n   * @returns {EyeElement}\r\n   */\r\n  init: function (selector, attrs, css) {\r\n    let _this = this;\r\n    if (selector instanceof HTMLElement) {\r\n      this.raw = selector;\r\n    } else if (htmlElements.includes(selector)) {\r\n      // creating a new element\r\n      this.raw = document.createElement(selector);\r\n    } else {\r\n      // selecting\r\n      let s = selector.slice(-1) === \"!\";\r\n      this.raw = document.querySelectorAll(s ? selector.slice(0, -1) : selector);\r\n      this.length = this.raw.length;\r\n\r\n      if (this.length == 0) return null; // we stop everything here\r\n      if (this.length == 1 || s) this.raw = this.raw.item(0);\r\n    }\r\n\r\n    /**\r\n     * Handler used to integrate delegation concept/algorithme\r\n     * @param {Event} e \r\n     */\r\n    function handler(e) {\r\n      let name = e.type,\r\n        listeners = _this.dlgListeners,\r\n        _etarget = e.target,\r\n        me = this; // refers to the element being listening to the event\r\n\r\n      if (listeners.has(name)) {\r\n        let cbs = listeners.get(name);\r\n        cbs?.forEach(({ callback, target }) => {\r\n          if (_etarget.closest(target)) {\r\n            // we hitting the target\r\n            callback(e, me);\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      let parentElm = null;\r\n      if (attrs)\r\n        for (const key in attrs) {\r\n          const value = attrs[key];\r\n          if (key == \"class\")\r\n            elm.classList.add.apply(\r\n              elm.classList,\r\n              (value instanceof Array ? value : value.split(\" \")).filter(a => a != \"\")\r\n            );\r\n          else if (key == \"text\") elm.textContent = value;\r\n          else if (key == \"html\") elm.innerHTML = value;\r\n          else if (key == \"data\") for (const k in value) elm.dataset[k] = value[k];\r\n          else if (key == \"parent\") parentElm = value;\r\n          else if (key in elm) elm[key] = value;\r\n          else if (key[0] != \"_\") elm.setAttribute(key, elm); // we must ignore _ started keys 'cause they are used by models\r\n        }\r\n      if (css)\r\n        for (const key in css)\r\n          if (key.indexOf(\"-\") != -1) elm.style[key] = css[key];\r\n          else elm.style[flat(key)] = css[key];\r\n      if (parentElm instanceof EyeElement || parentElm instanceof HTMLElement) parentElm.append(elm);\r\n\r\n      // creating the delegation handling model\r\n      delegationEvents.forEach(ev => {\r\n        elm.addEventListener(ev, handler);\r\n      })\r\n    })\r\n\r\n    // creating/initiating events functions\r\n    events.forEach(ev => {\r\n      _this[ev] = function (cb) {\r\n        if (cb) {\r\n          if (typeof cb == \"function\") _this.on(ev, cb);\r\n        } else _this.trigger(ev);\r\n\r\n        return _this;\r\n      }\r\n    })\r\n\r\n\r\n    return this;\r\n  },\r\n  /**\r\n   * Run(loop) through selected NodeList, or run a single call for one single element\r\n   * @method EyeElement#each\r\n   * @param {(elm: EyeElement, index: number, current: EyeElement)=>} cb \r\n   * @returns {EyeElement}\r\n   */\r\n  each: function (cb) {\r\n    let _this = this;\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      cb(elm, idx, _this);\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * Set or get element html\r\n   * @method EyeElement#html\r\n   * @param {string} [html]\r\n   * @returns {EyeElement|string}\r\n   */\r\n  html: function (html) {\r\n    let out = \"\";\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (!html) return out = elm.innerHTML;// getting the first one and exiting\r\n      elm.innerHTML = html;\r\n    })\r\n    return out ? out : this;\r\n  },\r\n  /**\r\n   * Set or get element text\r\n   * @method EyeElement#text\r\n   * @param {string} [text]\r\n   * @returns {EyeElement|string}\r\n   */\r\n  text: function (text) {\r\n    let out = \"\";\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (!text) return out = elm.textContent;\r\n      elm.textContent = text;\r\n    })\r\n    return out ? out : this;\r\n  },\r\n  /**\r\n   * Set or get element's data values\r\n   * @method EyeElement#data\r\n   * @param {string} key\r\n   * @param {*} [value]\r\n   * @returns {EyeElement|string}\r\n   */\r\n  data: function (key, value) {\r\n    if (key) {\r\n      if (value) this.datacollection.set(key, value);\r\n      else return this.datacollection.get(key);\r\n    }\r\n    return this;\r\n  },\r\n  /**\r\n   * Set or get an attribute value\r\n   * @method EyeElement#attr\r\n   * @param {string} name\r\n   * @param {*} [value]\r\n   * @returns {EyeElement|string}\r\n   */\r\n  attr: function (name, value) {\r\n    let out = \"\";\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (name.indexOf(\"data-\") === 0) {\r\n        let [key, val] = name.split(\"-\").map((a) => a.trim());\r\n        // modify data\r\n        if (value == undefined) return out = elm.dataset[val];\r\n        elm.dataset[val] = value;\r\n      } else {\r\n        if (name in elm) {\r\n          if (value == undefined) return out = elm[name];\r\n          elm[name] = value;\r\n        } else if (name[0] != \"_\") {\r\n          if (value == undefined) return out = elm.getAttribute(name)\r\n          elm.setAttribute(name, value);\r\n        }\r\n      }\r\n    })\r\n    return out ? out : this;\r\n  },\r\n  /**\r\n   * Super fancy class function that allows to modify class with different methods in one\r\n   * @method EyeElement#class\r\n   * @param {string} actions\r\n   * @returns {EyeElement|string}\r\n   */\r\n  class: function (actions) {\r\n    let out = \"\";\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (typeof actions === \"number\") return out = elm.classList.item(actions);\r\n\r\n      actions.split(\" \").forEach((action) => {\r\n        if (action[0] == \"-\") {\r\n          elm.classList.remove(action.substring(1, action.length));\r\n        } else if (action[0] == \"%\") {\r\n          elm.classList.toggle(action.substring(1, action.length));\r\n        } else if (action[0] == \"?\") {\r\n          out = elm.classList.contains(action.substring(1, action.length));\r\n        } else if (action.indexOf(\"/\") != -1) {\r\n          [v1, v2] = action.split(\"/\");\r\n          elm.classList.replace(v1, v2);\r\n        } else {\r\n          elm.classList.add(action.substring(1, action.length));\r\n        }\r\n      });\r\n      if (out) return;\r\n    })\r\n\r\n    return out ? out : this;\r\n  },\r\n  /**\r\n   * Show/display the element\r\n   * @method EyeElement#show\r\n   * @param {string} cls\r\n   * @returns {EyeElement}\r\n   */\r\n  show: function (cls) {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      elm.style.display = cls ?? \"inline-block\";\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * Hide the element\r\n   * @method EyeElement#hide\r\n   * @param {boolean} opacity whether to hide by making invisible?\r\n   * @returns {EyeElement}\r\n   */\r\n  hide: function (opacity) {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (opacity) elm.style.opacity = 0;\r\n      else elm.style.display = \"none\";\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * Append one or more nodes to the current element\r\n   * @method EyeElement#append\r\n   * @param {Node|Array<Node>} elm\r\n   * @param {string} [pos] [optional]\r\n   * @returns {EyeElement}\r\n   */\r\n  append: function (elm, pos) {\r\n    elm = Array.isArray(elm) ? elm : [elm];\r\n    if (this.raw instanceof NodeList) {\r\n      console.warn(`[EyeJS] beware while using .append with multi selected elements`);\r\n      this.raw.forEach((itm, idx) => {\r\n        if (!elm[idx]) return;\r\n        itm.append(elm[idx]);\r\n      })\r\n      return this;\r\n    }\r\n    if (!pos) this.raw.append(...elm);\r\n    else\r\n      switch (pos) {\r\n        case \"next\":\r\n        case \"after\":\r\n          this.raw.after(...elm);\r\n          break;\r\n        case \"previous\":\r\n        case \"before\":\r\n          this.raw.before(...elm);\r\n          break;\r\n      }\r\n    return this;\r\n  },\r\n  /**\r\n   * Replace current node with the new node, or multiple nodes with multiple selected elements\r\n   * @method EyeElement#replaceWith\r\n   * @param {...Node} nodes\r\n   * @param {string} [pos] [optional]\r\n   * @returns {EyeElement}\r\n   */\r\n  replaceWith: function (...nodes) {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (!nodes[idx]) return;\r\n      elm.replaceWith(nodes[idx]);\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * Get current element parent or append it to one\r\n   * @method EyeElement#parent\r\n   * @param {HTMLElement} par\r\n   * @returns {EyeElement}\r\n   */\r\n  parent: function (par) {\r\n    if (par) {\r\n      if (!(par instanceof HTMLElement) && !(par instanceof EyeElement))\r\n        throw new Error(\r\n          \"[EyeJS] Unable to append current element to parent because it's not HTMLElement\"\r\n        );\r\n      (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n        par.append(elm);\r\n      })\r\n      return this;\r\n    }\r\n    return eye(this.raw instanceof NodeList ? this.raw.item(0).parentElement : this.raw.parentElement);\r\n  },\r\n  /**\r\n   * Returns whether current node is the same/equal(depending on `check`) as the passed node or not\r\n   * @method EyeElement#is\r\n   * @param {Node} node\r\n   * @param {string} [check] check type `same`, `equal`\r\n   * @returns {boolean}\r\n   */\r\n  is: function (node, check) {\r\n    if (this.raw instanceof NodeList) {\r\n      console.warn(`[EyeJS] .is is not functional with multi selected elements`);\r\n      return this;\r\n    }\r\n    if (node === \"connected\") return this.raw.isConnected;\r\n    switch (check) {\r\n      case \"same\":\r\n        return this.raw.isSameNode(node);\r\n      case \"equal\":\r\n        return this.raw.isEqualNode(node);\r\n      default:\r\n        console.error(\r\n          `[EyeJS] Unknown check \"${check}\", possible values are [\"same\",\"equal\",\"connected\"]`\r\n        );\r\n        return false;\r\n    }\r\n  },\r\n  /**\r\n   * Set or get a css attribute\r\n   * @method EyeElement#css\r\n   * @param {string} attr\r\n   * @param {string|number} [value]\r\n   * @returns {EyeElement|string}\r\n   */\r\n  css: function (attr, value) {\r\n    if (attr) {\r\n      let out = \"\";\r\n      attr = flat(attr);\r\n      (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n        if (!value) return out = elm.style[attr];\r\n        elm.style[attr] = value;\r\n      })\r\n      return out ? out : this;\r\n    } else return console.error(`[EyeJS] mission argument \"attr\" in function .css`);\r\n  },\r\n  /**\r\n   * Remove current element\r\n   * @method EyeElement#remove\r\n   * @returns {EyeElement}\r\n   */\r\n  remove: function () {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      elm.remove();\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * @overload\r\n   * @param {string} ev\r\n   * @param {function} cb\r\n   */\r\n  /**\r\n   * @overload\r\n   * @param {string} ev\r\n   * @param {string} trg optionally define a target element for the event\r\n   * @param {function} cb\r\n   *\r\n   */\r\n  /**\r\n   * Attach an listener/handler to specific event or events\r\n   * @method EyeElement#on\r\n   * @param {string} ev may contain multiple events separated by \" \"(space)\r\n   * @param {string|function} arg2 \r\n   * @param {function} [arg3]\r\n   * @returns {EyeElement|void}\r\n   */\r\n  on: function (ev, arg2, arg3) {\r\n    ev = ev.split(\" \");\r\n    let target = typeof arg2 === \"string\" ? arg2 : null;\r\n    let cb = typeof arg2 === \"function\" ? arg2 : arg3;\r\n    let _this = this;\r\n    if (typeof cb !== \"function\")\r\n      return console.error(\r\n        \"[EyeJS] .on method is missing the actuall callback `cb` or not of type function\"\r\n      );\r\n\r\n    let elms = (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]])\r\n\r\n    let outsider = null;\r\n    ev.forEach(evt => {\r\n      if (target) {\r\n        if (!delegationEvents.includes(evt))\r\n          return outsider = evt; // outsider events \r\n\r\n        if (!_this.dlgListeners.has(evt))\r\n          _this.dlgListeners.set(evt, new Set());\r\n        _this.dlgListeners.get(evt).add({ callback: cb, target });\r\n      } else {\r\n        elms.forEach(([idx, elm]) => {\r\n          elm.addEventListener(evt, cb);\r\n        })\r\n      }\r\n    })\r\n\r\n    if (outsider !== null)\r\n      return console.error(`[EyeJS] trying to use delegation for an inappropriate event \"${outsider}\"`);\r\n\r\n    return this;\r\n  },\r\n  /**\r\n   * Remove event listener of a specific event\r\n   * @method EyeElement#off\r\n   * @param {string} ev \r\n   * @param {function} cb \r\n   * @returns {EyeElement|void}\r\n   */\r\n  off: function (ev, cb) {\r\n    let _this = this,\r\n      listeners = _this.dlgListeners;\r\n    if (typeof cb != \"function\")\r\n      return console.error(\r\n        \"[EyeJS] .off method is missing the actuall callback `cb` or not of type function\"\r\n      );\r\n    ev = ev.split(\" \");\r\n\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      ev.forEach(evt => elm.removeEventListener(evt, cb));\r\n    })\r\n    // now delegated events\r\n    ev.forEach(evt => {\r\n      if (listeners.has(evt)) {\r\n        let set = listeners.get(evt);\r\n        for (const item of set) {\r\n          if (cb === item.callback) {\r\n            // found it & remove it\r\n            set.delete(item);\r\n          }\r\n        }\r\n      }\r\n    })\r\n  },\r\n  /**\r\n   * Trigger specific event for this element\r\n   * @method EyeElement#trigger\r\n   * @param {string} ev \r\n   * @returns {EyeElement}\r\n   */\r\n  trigger: function (ev) {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      elm.dispatchEvent(getEvent(ev));\r\n    })\r\n    return this;\r\n  },\r\n  /**\r\n   * Find one or multiple child elements by `selector`\r\n   * @method EyeElement#find\r\n   * @param {string} selector \r\n   * @param {boolean} [multiple] `true` by default \r\n   */\r\n  find: function (selector, multiple) {\r\n    let found = [];\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      elm.querySelectorAll(selector).forEach(res => found.push(res));\r\n    })\r\n    if (multiple === false)\r\n      return found.length > 0 ? eye(found[0]) : null;\r\n    return found.length > 0 ? (found.length == 1 ? eye(found[0]) : found.map(a => eye(a))) : null;\r\n  },\r\n  /**\r\n   * Returns a clone of current selected element/s\r\n   * @method EyeElement#clone\r\n   * @param {HTMLElement} [parent] optionally append new clone to a parent\r\n   * @returns {Array<EyeElement>|EyeElement}\r\n   */\r\n  clone: function (parent) {\r\n    if (this.raw instanceof NodeList) {\r\n      let list = [];\r\n      this.raw.forEach(nd => {\r\n        list.push(nd.cloneNode(true));\r\n      })\r\n      if (parent instanceof HTMLElement || parent instanceof EyeElement) list.forEach(el => parent.append(el));\r\n      return list;\r\n    } else {\r\n      let clone = this.raw.cloneNode(true);\r\n      if (parent instanceof HTMLElement || parent instanceof EyeElement) parent.append(clone);\r\n      return clone;\r\n    }\r\n  },\r\n  /**\r\n   * Compute DOMRect or style declaration of current element\r\n   * @method EyeElement#compute\r\n   * @param {string} type \r\n   * @returns {DOMRect|CSSStyleDeclaration}\r\n   */\r\n  compute: function (type) {\r\n    type = type || \"bounds\";\r\n    if (type === \"bounds\")\r\n      return (this.raw instanceof NodeList ? this.raw.item(0) : this.raw).getBoundingClientRect();\r\n    else if (type == \"style\")\r\n      return getComputedStyle(this.raw instanceof NodeList ? this.raw.item(0) : this.raw)\r\n    console.error(`[EyeJS] unkown type \"${type}\" in function .compute, possible values are \"bounds\" \"style\"`);\r\n  },\r\n  /**\r\n   * Activate/disactive different pointer features such as PointerLock, pointerCapture...\r\n   * @method EyeElement#pointer\r\n   * @param {string} action \r\n   * @param {boolean} status \r\n   * @param {string} [pid]  \r\n   * @returns {EyeElement}\r\n   */\r\n  pointer: function (action, status, pid) {\r\n    (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(([idx, elm]) => {\r\n      if (action === \"capture\") {\r\n        if (status === true) elm.setPointerCapture(pid);\r\n        else elm.releasePointerCapture(pid);\r\n      } else if (action === \"lock\") {\r\n        if (status === true) elm.requestPointerLock();\r\n        else document.exitPointerLock();\r\n      }\r\n    });\r\n    return this;\r\n  },\r\n  /**\r\n   * Select a child of this element\r\n   * @method EyeElement#child\r\n   * @param {number} index \r\n   * @returns {EyeElement|null}\r\n   */\r\n  child: function (index) {\r\n    let it = (this.raw instanceof NodeList ? this.raw.item(0) : this.raw).children[index];\r\n    if (it) return eye(it);\r\n    return null;\r\n  },\r\n  /**\r\n   * Set/get the value of the current element\r\n   * @method EyeElement#val\r\n   * @param {*} value \r\n   * @returns \r\n   */\r\n  val: function (value) {\r\n    if (value) (this.raw instanceof NodeList ? [...this.raw.entries()] : [[0, this.raw]]).forEach(a => a.value = value);\r\n    else return (this.raw instanceof NodeList ? this.raw.item(0) : this.raw).value;\r\n    return this;\r\n  }\r\n};\r\n\r\n/**\r\n * Creates or select nodes using css selectors, offering a pack of useful functions to use around your code!\r\n * @param {String} tag\r\n * @param {AttrMap} attrs\r\n * @param {Object} css CSS styles to be applied to the element.\r\n * @returns {EyeElement}\r\n */\r\nfunction eye(tag, attrs, css) {\r\n  if (typeof tag === \"string\" && tag.indexOf(\"model:\") === 0) {\r\n    if (!attrs) return console.error(\"[EyeJS] Model creation requires parameter 'attr' as prototype, none delivered!\");\r\n\r\n    let [actag, ...ops] = tag.split(\":\")[1].split(\" \").filter(a => a != \"\");\r\n    // creating a model\r\n    let model = eye(\"div\", {\r\n      class: \"eye-model \" + actag + \" \" + ops.join(\" \"),\r\n      data: {\r\n        model: actag,\r\n        eyeModel: actag\r\n      }\r\n    });\r\n\r\n    let sets = cmcl(model, attrs);\r\n\r\n    /**\r\n     * @param {string} attrs\r\n     * @returns {ModelEyeElement}\r\n     */\r\n    return (attrs) => {\r\n      let copy = model.clone(attrs?.parent);\r\n      // define & attach the refresh function\r\n      copy.refresh = function (attrs = {}) {\r\n        let def = attrs.default === false ? false : true;\r\n        sets.forEach((item) => {\r\n          if (def === true || (!def && attrs.hasOwnProperty(item.name)))\r\n            item.set(copy, attrs[item.name]);\r\n        });\r\n        return this;\r\n      };\r\n      return copy.refresh(attrs);\r\n    };\r\n  } else return new EyeElement().init(tag, attrs, css);\r\n}\r\n\r\n// gloablly exposed\r\nwindow.eye = eye;\r\nexport default eye;\r\n"],"names":["events","htmlElements","flat","word","n","i","length","t","toUpperCase","toLowerCase","cmcl","parent","layer","obj","key","subcontent","def","_set","split","tagName","cls","_set_name","_set_default","map","a","trim","elm","eye","class","data","value","undefined","push","name","set","querySelector","textContent","Array","concat","delegationEvents","EyeElement","this","raw","datacollection","WeakMap","dlgListeners","Map","tag","attrs","css","indexOf","console","error","actag","ops","filter","model","join","eyeModel","sets","copy","clone","refresh","default","forEach","item","hasOwnProperty","init","prototype","selector","_this","HTMLElement","includes","document","createElement","s","slice","querySelectorAll","handler","e","type","listeners","_etarget","target","me","has","cbs","get","callback","closest","NodeList","entries","idx","parentElm","classList","add","apply","innerHTML","k","dataset","setAttribute","style","append","ev","addEventListener","cb","on","trigger","each","html","out","text","attr","val","getAttribute","actions","action","remove","substring","toggle","contains","v1","v2","replace","show","display","hide","opacity","pos","isArray","warn","itm","after","before","replaceWith","nodes","par","Error","parentElement","is","node","check","isConnected","isSameNode","isEqualNode","arg2","arg3","elms","outsider","evt","Set","off","removeEventListener","delete","dispatchEvent","options","MouseEvent","PointerEvent","KeyboardEvent","FocusEvent","Event","WheelEvent","ClipboardEvent","UIEvent","CustomEvent","getEvent","find","multiple","found","res","list","nd","cloneNode","el","compute","getBoundingClientRect","getComputedStyle","pointer","status","pid","setPointerCapture","releasePointerCapture","requestPointerLock","exitPointerLock","child","index","it","children","window"],"mappings":"oOAsFA,MAAMA,EAAS,CAEb,QACA,WACA,YACA,UACA,YACA,aACA,aACA,YACA,WACA,cAGA,UACA,WACA,QAGA,QACA,OACA,UACA,WAGA,SACA,SACA,QACA,QACA,SAGA,aACA,WACA,YACA,cAGA,cACA,YACA,cACA,eACA,eACA,gBAGA,YACA,UACA,YACA,WACA,YACA,OAGA,SACA,SACA,OACA,eACA,SAGA,OACA,QACA,QACA,eACA,aAGA,OACA,MACA,QAGA,iBACA,eACA,qBACA,kBACA,gBAGA,qBACA,kBACA,iBAGA,QACA,aACA,YAGIC,EAAe,CAEnB,OACA,OACA,OACA,OACA,QACA,QAGA,OACA,UACA,UACA,QACA,SACA,SACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,MACA,UAGA,aACA,KACA,MACA,KACA,KACA,aACA,SACA,KACA,KACA,KACA,IACA,MACA,KAGA,IACA,OACA,IACA,MACA,MACA,KACA,OACA,OACA,OACA,MACA,KACA,IACA,MACA,OACA,IACA,KACA,KACA,OACA,IACA,OACA,QACA,OACA,SACA,MACA,MACA,OACA,IACA,MACA,MAGA,OACA,QACA,MACA,MACA,QACA,QAGA,QACA,SACA,SACA,UACA,SACA,SAGA,SACA,WACA,SAGA,MACA,MAGA,UACA,MACA,WACA,QACA,QACA,KACA,QACA,KACA,QACA,KAGA,SACA,WACA,WACA,OACA,QACA,QACA,SACA,QACA,WACA,SACA,SACA,WACA,SACA,WAGA,UACA,SACA,UAGA,OACA,YAGF,SAASC,EAAKC,GACZ,IAAIC,EAAI,GACR,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAK,CACpC,MAAME,EAAIJ,EAAKE,GACXE,IAAMA,EAAEC,eAAiBD,IAAMA,EAAEE,cAAeL,GAAK,IAAMG,EAC1DH,GAAKG,CACX,CACD,OAAOH,EAAEK,aACX,CAQA,SAASC,EAAKC,EAAQC,GACpB,IAAIC,EAAM,GACV,IAAK,MAAMC,KAAOF,EAAO,CACvB,MAAMG,EAAaH,EAAME,IAClBE,EAAKC,GA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"}